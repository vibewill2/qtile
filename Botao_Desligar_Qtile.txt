================================================================================
                        BOT√ÉO DE DESLIGAR - QTILE - DOCUMENTA√á√ÉO
================================================================================

Data de Instala√ß√£o: 01/10/2025 23:54
Sistema: Fedora Linux
Usu√°rio: vibewill

================================================================================
                                  RESUMO
================================================================================

Foi adicionado um bot√£o de desligar (‚ö°) na barra do Qtile que abre um menu
com op√ß√µes de energia: Bloquear, Logout, Suspender, Reiniciar e Desligar.

================================================================================
                            ARQUIVOS MODIFICADOS
================================================================================

1. CONFIGURA√á√ÉO DO QTILE:
   üìÅ Arquivo: /home/vibewill/.config/qtile/config.py
   üìç Localiza√ß√£o: Linha ~396-418 (se√ß√£o da barra)
   
   C√ìDIGO ADICIONADO:
   ```python
   # Bot√£o de Desligar
   widget.TextBox(
       text="",
       background=colors["bg"],
       padding=4
   ),
   
   widget.TextBox(
       text="‚ö°",  # √çcone de power
       background=colors["red"],
       foreground="#000000",
       mouse_callbacks={
           'Button1': lazy.spawn('/home/vibewill/.config/qtile/power-menu.sh menu')
       },
       fontsize=16,
       padding=12
   ),
   
   widget.TextBox(
       text="",
       background=colors["bg"],
       padding=4
   ),
   ```

================================================================================
                             ARQUIVOS CRIADOS
================================================================================

1. SCRIPT DO MENU DE ENERGIA:
   üìÅ Localiza√ß√£o: /home/vibewill/.config/qtile/power-menu.sh
   üîß Fun√ß√£o: Menu interativo com op√ß√µes de energia
   ‚öôÔ∏è  Execut√°vel: sim (chmod +x)
   üìã Descri√ß√£o: Script bash que mostra menu via rofi/dmenu

2. DOCUMENTA√á√ÉO:
   üìÅ Localiza√ß√£o: /home/vibewill/Documentos/Botao_Desligar_Qtile.txt
   üìã Descri√ß√£o: Este arquivo de documenta√ß√£o

================================================================================
                           DEPEND√äNCIAS INSTALADAS
================================================================================

1. SWAYLOCK:
   - Bloqueador de tela para Wayland
   - Comando: sudo dnf install -y swaylock
   - Localiza√ß√£o: /usr/bin/swaylock

2. J√Å EXISTENTES:
   - rofi (menu launcher) - /usr/bin/rofi
   - systemctl (controle do sistema)
   - qtile (gerenciador de janelas)

================================================================================
                              FUNCIONALIDADES
================================================================================

1. BOT√ÉO NA BARRA:
   - √çcone: ‚ö° (raio em fundo vermelho)
   - Posi√ß√£o: Final da barra, antes do separador
   - A√ß√£o: Clique esquerdo abre menu de energia

2. OP√á√ïES DO MENU:
   üîí Bloquear    - Bloqueia a tela (swaylock)
   üè† Logout      - Sai do Qtile
   üí§ Suspender   - Coloca sistema em suspens√£o
   üîÑ Reiniciar   - Reinicia o sistema (com confirma√ß√£o)
   ‚ö° Desligar    - Desliga o sistema (com confirma√ß√£o)
   ‚ùå Cancelar    - Fecha o menu sem fazer nada

3. CONFIRMA√á√ïES DE SEGURAN√áA:
   - Reiniciar e Desligar pedem confirma√ß√£o
   - Usa zenity (gr√°fico) ou rofi para confirma√ß√£o
   - Previne desligamentos acidentais

4. FALLBACKS:
   - Prioridade: rofi > dmenu > zenity
   - Se nenhum menu dispon√≠vel, mostra erro
   - M√∫ltiplos bloqueadores: swaylock > i3lock > loginctl

================================================================================
                               COMO USAR
================================================================================

1. CLIQUE NO BOT√ÉO:
   - Clique no √≠cone ‚ö° na barra do Qtile
   - Menu aparecer√° com as op√ß√µes

2. ATALHOS DE TECLADO (no menu):
   - Setas ‚Üë‚Üì para navegar
   - Enter para confirmar
   - Esc para cancelar

3. EXECU√á√ÉO MANUAL:
   bash /home/vibewill/.config/qtile/power-menu.sh menu

================================================================================
                           COMANDOS EXECUTADOS
================================================================================

BLOQUEAR TELA:
   swaylock --color 000000 --inside-color 1e1e1e --ring-color 333333 --key-hl-color 00ff00 --text-color ffffff

LOGOUT:
   qtile cmd-obj -o cmd -f shutdown

SUSPENDER:
   systemctl suspend

REINICIAR (com confirma√ß√£o):
   systemctl reboot

DESLIGAR (com confirma√ß√£o):
   systemctl poweroff

================================================================================
                           PERSONALIZA√á√ÉO
================================================================================

1. MUDAR √çCONE DO BOT√ÉO:
   - Editar config.py linha ~404
   - Substituir "‚ö°" por outro √≠cone Unicode
   - Exemplos: üîå ‚èª üî¥ ‚≠ï

2. MUDAR COR DO BOT√ÉO:
   - Editar config.py linha ~405
   - Substituir colors["red"] por outra cor
   - Op√ß√µes: colors["green"], colors["blue"], etc.

3. ADICIONAR OUTRAS OP√á√ïES:
   - Editar power-menu.sh
   - Adicionar nova op√ß√£o na vari√°vel $options
   - Adicionar case correspondente no switch

4. MUDAR MENU:
   - Instalar dmenu: sudo dnf install dmenu
   - O script detecta automaticamente qual usar

================================================================================
                          RESOLU√á√ÉO DE PROBLEMAS
================================================================================

PROBLEMA: Bot√£o n√£o aparece na barra
SOLU√á√ÉO:
   1. Verificar se config.py foi salvo
   2. Recarregar Qtile: qtile cmd-obj -o cmd -f reload_config
   3. Verificar sintaxe do Python

PROBLEMA: Menu n√£o abre ao clicar
SOLU√á√ÉO:
   1. Verificar permiss√£o: chmod +x power-menu.sh
   2. Testar manualmente: ./power-menu.sh menu
   3. Verificar se rofi est√° instalado

PROBLEMA: Bloqueio de tela n√£o funciona
SOLU√á√ÉO:
   1. Instalar swaylock: sudo dnf install swaylock
   2. Testar: swaylock --color 000000
   3. Verificar se est√° no Wayland

PROBLEMA: Confirma√ß√£o n√£o aparece
SOLU√á√ÉO:
   1. Instalar zenity: sudo dnf install zenity
   2. Testar rofi: rofi --version
   3. Verificar logs: journalctl -f

================================================================================
                              ESTRUTURA DO C√ìDIGO
================================================================================

SCRIPT power-menu.sh:
   - Fun√ß√£o menu(): Mostra op√ß√µes usando rofi/dmenu/zenity
   - Fun√ß√£o power-menu(): Compatibilidade com rofi modi
   - Switch case: Executa a√ß√£o baseada na escolha
   - Confirma√ß√µes: Di√°logos de seguran√ßa para a√ß√µes perigosas

WIDGET no config.py:
   - TextBox com √≠cone ‚ö°
   - mouse_callbacks para detectar clique
   - Estilo consistente com tema (bordas arredondadas)
   - Posicionamento no final da barra

================================================================================
                               LOCALIZA√á√ÉO DOS ARQUIVOS
================================================================================

CONFIGURA√á√ÉO:
   /home/vibewill/.config/qtile/config.py (linhas ~396-418)

SCRIPTS:
   /home/vibewill/.config/qtile/power-menu.sh

DOCUMENTA√á√ÉO:
   /home/vibewill/Documentos/Botao_Desligar_Qtile.txt

BACKUP RECOMENDADO:
   tar -czf qtile-power-button-backup.tar.gz ~/.config/qtile/

================================================================================
                                   CR√âDITOS
================================================================================

SISTEMA: Qtile Window Manager
MENU: rofi/dmenu
BLOQUEIO: swaylock
SISTEMA OPERACIONAL: Fedora Linux

================================================================================
                                    VERS√ÉO
================================================================================

Vers√£o: 1.0
Data: 01/10/2025 23:54
Testado em: Fedora Linux + Qtile + Wayland

================================================================================
                                     FIM
================================================================================